new code for player.

Added bug fix to this file.

